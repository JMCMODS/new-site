<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <title>Project Santos RP</title>
    <meta name="description" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>
    <header>
        <img class="logo" src="images/logo.png" alt="logo" />
        <nav>
            <ul class="nav_links">
                <li><a href="index.html"><i class="fas fa-home" style="margin-right: 8px;"></i>Home</a></li>
                <li><a href="download.html"><i class="fas fa-download" style="margin-right: 8px;"></i>Download</a></li>
                <li><a href="suggestions.html"><i class="fas fa-lightbulb" style="margin-right: 8px;"></i>Suggestions</a></li>
                <li><a href="staff.html"><i class="fas fa-users" style="margin-right: 8px;"></i>The Team</a></li>
                <li><a href="media.html"><i class="fas fa-photo-film" style="margin-right: 8px;"></i>Media</a></li>
                <li><a href="support.html"><i class="fas fa-heart" style="margin-right: 8px;"></i>Support</a></li>
            </ul>
        </nav>
        <div class="cta"></div>
        <button id="signOutBtn" style="display:none; margin-left: 10px;">Sign Out</button>
    </header>


    <section class="mob-header">
        <nav>
            <div class="mob-links" id="mobLinks">
                <ul>
                    <li><a href="index.html"><i class="fas fa-home"></i> </a></li>
                    <li><a href="download.html"><i class="fas fa-download"></i></a></li>
                    <li><a href="suggestions.html"><i class="fas fa-lightbulb"></i> </a></li>
                    <li><a href="staff.html"><i class="fas fa-users"></i> </a></li>
                    <li><a href="media.html"><i class="fas fa-photo-film"></i> </a></li>
                    <li><a href="support.html"><i class="fas fa-heart"></i></a></li>
                </ul>
            </div>
        </nav>
        <div class="cta"></div>
        <button id="signOutBtn" style="display:none; margin-left: 10px;">Sign Out</button>
    </section>


    <video autoplay muted loop id="bg-video">
        <source src="images/video.mp4" type="video/mp4">
        Your browser does not support the video tag.
    </video>
    
    <section class="hero-section">

        <div class="typing-container">
            <p id="line1"></p>
            <p id="line2"></p>
            <p id="line3"></p>
            <p id="line4"></p>
            <p id="line5"></p>
        </div>

        <div style="text-align: center; margin: 20px 0;">
            <button id="actionButton" style="padding: 10px 20px; font-size: 16px; cursor: pointer;"
                    onclick="window.location.href='download.html'">
                Learn More About PSRP
            </button>
        </div>


        <div class="typing-container2">
            <h2>
                Developed By JMC MODS<br />
                Designed For Single-Player<br />
                Super Easy Installation Process<br />
                Actively Updated And Maintained<br />
                Active Support Team If You Need Help,
            </h2>
        </div>


    </section>
    <!--

    <section class="video-banner">
        <video autoplay muted loop playsinline class="bg-video">
            <source src="images/intro.mp4" type="video/mp4" />
            Your browser does not support the video tag.
        </video>
        </section>
         --->
    <footer>
        <div class="footerContainer">
            <div class="socialIcons">
                <a href=""><i class="fa-brands fa-discord"></i></a>
                <a href=""><i class="fa-brands fa-tiktok"></i></a>
                <a href=""><i class="fa-brands fa-youtube"></i></a>
                <a href=""><i class="fa-brands fa-patreon"></i></a>
            </div>
        </div>
        <div class="footerBottom">
            <p>Copyright &copy;2025: Designed by <span class="designer">JMC MODS</span></p>
        </div>
    </footer>

    <script>
        const lines = [
            "Developed By JMC MODS",
            "Designed For Single-Player",
            "Super Easy Installation Process",
            "Actively Updated And Maintained",
            "Active Support Team If You Need Help",
        ];

        const speed = 50;

        function typeLine(i, j = 0) {
            if (i >= lines.length) return;
            const el = document.getElementById(`line${i + 1}`);
            el.textContent = lines[i].substring(0, j);
            if (j < lines[i].length) {
                setTimeout(() => typeLine(i, j + 1), speed);
            } else {
                setTimeout(() => typeLine(i + 1), 500);
            }
        }

        typeLine(0);
    </script>
    <script>
        document.addEventListener("DOMContentLoaded", () => {
            const images = [
                "images/loadingPageImage5.png",
                "images/loadingPageImage1.png",
                "images/loadingPageImage2.png",
                "images/loadingPageImage3.png",
                "images/loadingPageImage4.png"
            ];

            const bg1 = document.querySelector(".bg1");
            const bg2 = document.querySelector(".bg2");
            const blackOverlay = document.querySelector(".black-overlay");

            let current = 0;
            let isBg1Visible = true;

            // Set first background image (it starts hidden under black overlay)
            bg1.style.backgroundImage = `url(${images[0]})`;
            bg1.style.opacity = 1;

            // After 10s: fade out black overlay and start rotating backgrounds
            setTimeout(() => {
                blackOverlay.style.opacity = 0;
                // Optional: remove black overlay from DOM after fade
                setTimeout(() => {
                    blackOverlay.style.display = "none";

                }, 1000);

                // Start rotation
                setInterval(() => {
                    current = (current + 1) % images.length;
                    const nextImage = images[current];

                    if (isBg1Visible) {
                        bg2.style.backgroundImage = `url(${nextImage})`;
                        bg2.style.opacity = 1;
                        bg1.style.opacity = 0;
                    } else {
                        bg1.style.backgroundImage = `url(${nextImage})`;
                        bg1.style.opacity = 1;
                        bg2.style.opacity = 0;
                    }

                    isBg1Visible = !isBg1Visible;
                }, 13000); // 20s hold + 3s fade
            }, 1); // Initial 10s black screen
        });
    </script>
    <script>
        window.addEventListener('DOMContentLoaded', () => {
            setTimeout(() => {
                const container = document.querySelector('.typing-container');
                container.classList.remove('hidden-background');
                container.classList.add('visible-background');
            }, 14000); // 15 seconds
        });
    </script>
    <script src="https://accounts.google.com/gsi/client" async defer></script>
    <script>
        let userSignedIn = false;

        // Set cookie helper (expires in days)
        function setCookie(name, value, days) {
            const expires = new Date(Date.now() + days * 864e5).toUTCString();
            document.cookie = name + '=' + encodeURIComponent(value) + '; expires=' + expires + '; path=/';
        }

        // Get cookie helper
        function getCookie(name) {
            return document.cookie.split('; ').reduce((r, v) => {
                const parts = v.split('=');
                return parts[0] === name ? decodeURIComponent(parts[1]) : r;
            }, '');
        }

        // Google Sign-In callback
        function handleCredentialResponse(response) {
            console.log('Google sign-in response:', response);
            const base64Url = response.credential.split('.')[1];
            const base64 = base64Url.replace(/-/g, '+').replace(/_/g, '/');
            const jsonPayload = decodeURIComponent(
                atob(base64)
                    .split('')
                    .map(c => '%' + ('00' + c.charCodeAt(0).toString(16)).slice(-2))
                    .join('')
            );
            const userObject = JSON.parse(jsonPayload);

            userSignedIn = true;

            // Save cookies for 7 days
            setCookie('userSignedIn', 'true', 7);
            setCookie('userProfile', JSON.stringify(userObject), 7);

            // Enable submit button
            const submitBtn = document.getElementById('submitBtn');
            if (submitBtn) submitBtn.disabled = false;

            // Show user pic in header cta div
            const ctaDiv = document.querySelector('.cta');
            if (ctaDiv) {
                ctaDiv.style.display = 'flex';
                ctaDiv.innerHTML = `
                                        <div style="display: flex; align-items: center; gap: 10px;">
                                            <img src="${userObject.picture}" alt="User Image" style="width:32px; height:32px; border-radius:50%;">
                                            <button id="signOutBtn" style="padding: 6px 10px; font-size: 14px;">Sign Out</button>
                                        </div>
                                    `;
                ctaDiv.style.cursor = 'default';
            }
            const signOutBtn = document.getElementById('signOutBtn').addEventListener('click', signOut);
            if (signOutBtn) {
                signOutBtn.style.display = 'inline-block';
                signOutBtn.addEventListener('click', signOut);
            }
        }

        window.onload = () => {
            const signedInCookie = getCookie('userSignedIn');
            const profileCookie = getCookie('userProfile');

            if (signedInCookie === 'true' && profileCookie) {
                userSignedIn = true;
                const submitBtn = document.getElementById('submitBtn');
                if (submitBtn) submitBtn.disabled = false;

                const userObject = JSON.parse(profileCookie);
                const ctaDiv = document.querySelector('.cta');
                if (ctaDiv) {
                    ctaDiv.style.display = 'flex';
                    ctaDiv.style.cursor = 'default';
                    ctaDiv.innerHTML = `
                                    <div style="display: flex; align-items: center; gap: 10px;">
                                        <img src="${userObject.picture}" alt="User Image" style="width:32px; height:32px; border-radius:50%;">
                                        <button id="signOutBtn" style="padding: 6px 10px; font-size: 14px;">Sign Out</button>
                                    </div>
                                `;
                    document.getElementById('signOutBtn').addEventListener('click', signOut);
                }
            } else {
                // Initialize Google Sign-In button
                google.accounts.id.initialize({
                    client_id: '387205003521-n7amkkkb0k1p6n3s46br9kglr027j9oj.apps.googleusercontent.com',  // Replace this!
                    callback: handleCredentialResponse,
                    auto_select: false
                });

                google.accounts.id.renderButton(
                    document.querySelector('.cta'),
                    {
                        theme: "outline",
                        shape: "icon",
                        size: "large"
                    }
                );

                const submitBtn = document.getElementById('submitBtn');
                if (submitBtn) submitBtn.disabled = true;
            }

            // Prevent submit if not signed in
            const form = document.getElementById('suggestionForm');
            if (form) {
                form.addEventListener('submit', (e) => {
                    if (!userSignedIn) {
                        e.preventDefault();
                        alert('Please sign in to submit your suggestion.');
                    }
                });
            }

            // Character count for textarea
            const messageInput = document.getElementById('message');
            const charCount = document.getElementById('charCount');
            if (messageInput && charCount) {
                messageInput.addEventListener('input', () => {
                    charCount.textContent = `${messageInput.value.length}/500 characters`;
                });
            }
        };
        function signOut() {
            // Clear cookies
            setCookie('userSignedIn', '', -1);
            setCookie('userProfile', '', -1);

            userSignedIn = false;

            // Reset UI
            const ctaDiv = document.querySelector('.cta');
            if (ctaDiv) {
                ctaDiv.innerHTML = ''; // Clear current user image or button
                google.accounts.id.renderButton(ctaDiv, {
                    theme: "outline",
                    shape: "icon",
                    size: "large"
                });
            }

            const submitBtn = document.getElementById('submitBtn');
            if (submitBtn) submitBtn.disabled = true;

            const signOutBtn = document.getElementById('signOutBtn');
            if (signOutBtn) signOutBtn.style.display = 'none';
        }

    </script>




</body>
</html>